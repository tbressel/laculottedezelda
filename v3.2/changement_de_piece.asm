; ////////////////////////////////////////////////////////////////////////////////////////////////////////////////
; /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
; //////////////////////////////////////////// ALLER VERS LE BAS /////////////////////////////////////////////////
; ////////////////////////////////////////////////////////////////////////////////////////////////////////////////
; ////////////////////////////////////////////////////////////////////////////////////////////////////////////////
VERS_LE_BAS_LINK
	ld		a,(bankrom)							; On recupère le numero de la dernière bank utilisé
	ld		(bankrom_save),a					; et on la sauvegarde 
	ld		a,(flag_rom)						; On recupere l'état de la derniere bank connecté
	ld		(flag_rom_save),a					; et on la sauve aussi
	ld		a,2
	ld		(bankrom),a
	call	rom_on
	call	VERS_LE_BAS_LINK_ROM
	call	rom_off
	ld		a,(bankrom_save)
	ld		(bankrom),a
	ld		a,(flag_rom_save)
	ld		(flag_rom),a
	JP 		NOUVELLE_PIECE 
 
 ; ////////////////////////////////////////////////////////////////////////////////////////////////////////////////
; /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
; //////////////////////////////////////////// ALLER VERS LE HAUT /////////////////////////////////////////////////
; ////////////////////////////////////////////////////////////////////////////////////////////////////////////////
; ////////////////////////////////////////////////////////////////////////////////////////////////////////////////
VERS_LE_HAUT_LINK
	ld		a,(bankrom)							; On recupère le numero de la dernière bank utilisé
	ld		(bankrom_save),a					; et on la sauvegarde 
	ld		a,(flag_rom)						; On recupere l'état de la derniere bank connecté
	ld		(flag_rom_save),a					; et on la sauve aussi
	ld		a,2
	ld		(bankrom),a
	call	rom_on
	call	VERS_LE_HAUT_LINK_ROM
	call	rom_off
	ld		a,(bankrom_save)
	ld		(bankrom),a
	ld		a,(flag_rom_save)
	ld		(flag_rom),a
	JP 		NOUVELLE_PIECE 

; ////////////////////////////////////////////////////////////////////////////////////////////////////////////////
; /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
; //////////////////////////////////////////// ALLER VERS LA DROITE ///////////////////////////////////////////////
; ////////////////////////////////////////////////////////////////////////////////////////////////////////////////
; ////////////////////////////////////////////////////////////////////////////////////////////////////////////////
VERS_LA_DROITE_LINK
	ld		a,(bankrom)							; On recupère le numero de la dernière bank utilisé
	ld		(bankrom_save),a					; et on la sauvegarde 
	ld		a,(flag_rom)						; On recupere l'état de la derniere bank connecté
	ld		(flag_rom_save),a					; et on la sauve aussi
	ld		a,2
	ld		(bankrom),a
	call	rom_on
	call	VERS_LA_DROITE_LINK_ROM
	call	rom_off
	ld		a,(bankrom_save)
	ld		(bankrom),a
	ld		a,(flag_rom_save)
	ld		(flag_rom),a
	call	test_si_on_va_ou_vient_de_ocean
	JP 		NOUVELLE_PIECE 

; ////////////////////////////////////////////////////////////////////////////////////////////////////////////////
; /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
; //////////////////////////////////////////// ALLER VERS LA GAUCHE ///////////////////////////////////////////////
; ////////////////////////////////////////////////////////////////////////////////////////////////////////////////
; ////////////////////////////////////////////////////////////////////////////////////////////////////////////////
VERS_LA_GAUCHE_LINK

	ld		a,(bankrom)							; On recupère le numero de la dernière bank utilisé
	ld		(bankrom_save),a					; et on la sauvegarde 
	ld		a,(flag_rom)						; On recupere l'état de la derniere bank connecté
	ld		(flag_rom_save),a					; et on la sauve aussi
	ld		a,2
	ld		(bankrom),a
	call	rom_on
	call	VERS_LA_GAUCHE_LINK_ROM
	call	rom_off
	ld		a,(bankrom_save)
	ld		(bankrom),a
	ld		a,(flag_rom_save)
	ld		(flag_rom),a
	call	test_si_on_va_ou_vient_de_ocean
	JP 		NOUVELLE_PIECE 

; ************************************************************************************
; ****************************** affiche Link  ***************************************
; ************************************************************************************

AFFICHAGE_LINK
	ld		a,(compteur_gros_link)
	cp		a,0
	jp		z,il_se_passe_rien
	cp		a,nombre_de_piece_en_invincible
	jp		z,gros_link_off
	inc		a
	ld		(compteur_gros_link),a

	
il_se_passe_rien	
	call 	asic_on
	ld		hl,SPRH0_ZOOM
	ld 		a,(SPRH_TYPE_ZOOM)
	ld		b,4
ZOOM_OFF_0a3
	push	bc
	ld		(hl),a
	ld		a,l
	add		a,#08
	ld		l,a
	pop		bc
	djnz	ZOOM_OFF_0a3
	call 	asic_off
	ret


